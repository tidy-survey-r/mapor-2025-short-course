[
  {
    "objectID": "full-slide-deck.html#about-us",
    "href": "full-slide-deck.html#about-us",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "About Us",
    "text": "About Us\n\n\n\n\n\n\n\n\nRebecca Powell\nFors Marsh\n\n\n\n\n\n\n\n\nIsabella Velásquez\nPosit\n\n\n\nEach of us give a brief intro on our experience/background"
  },
  {
    "objectID": "full-slide-deck.html#background",
    "href": "full-slide-deck.html#background",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Background",
    "text": "Background\n\nThis tutorial largely builds off our book written with Stephanie Zimmer (RTI): Exploring Complex Survey Data Analysis Using R\n\nhttps://tidy-survey-r.github.io/site/\n\nThe book covers additional topics outside this tutorial including:\n\nOverview of survey process\nLinear regression and logistic regression\nCommunication of results (tables and plots)\nReproducible research best practices\n\nNot covered\n\nWeighting (calibration, post-stratification, raking, etc.)\nSurvival analysis\nNonlinear models"
  },
  {
    "objectID": "full-slide-deck.html#motivation",
    "href": "full-slide-deck.html#motivation",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Motivation",
    "text": "Motivation\n\nWe are R users who work with survey data regularly\nWe wanted to share knowledge with\n\nR users who may be inaccurately analyzing survey data\nSAS/SUDAAN/Stata users who may not know about the capabilities of R\n\n{srvyr} package developed using tidyverse style syntax"
  },
  {
    "objectID": "full-slide-deck.html#prerequisites",
    "href": "full-slide-deck.html#prerequisites",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Prerequisites",
    "text": "Prerequisites\nTidyverse familiarity\n\n\nSelecting a set of variables (select(starts_with(\"TOT\")))\nCreating new variables with mutate()\nSummarizing data with summarize()\nUsing group_by() with summarize() to create group summaries"
  },
  {
    "objectID": "full-slide-deck.html#overview-of-tutorial",
    "href": "full-slide-deck.html#overview-of-tutorial",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Overview of tutorial",
    "text": "Overview of tutorial\n\nAt the end of this tutorial, you should be able to\n\nCalculate point estimates and their standard errors with survey data\n\nProportions, totals, and counts\n\nPerform chi-squared tests\nConduct regression\nSpecify a survey design in R to create a survey object"
  },
  {
    "objectID": "full-slide-deck.html#roadmap-for-today",
    "href": "full-slide-deck.html#roadmap-for-today",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Roadmap for today",
    "text": "Roadmap for today\n\nGetting started\nDescriptive analysis\nStatistical testing\nModeling\nSampling design"
  },
  {
    "objectID": "full-slide-deck.html#logistics",
    "href": "full-slide-deck.html#logistics",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Logistics",
    "text": "Logistics\n\nWe will be using Posit Cloud for exercises\nAll materials are found at:\n\nhttps://tidy-survey-r.github.io/mapor-2025-short-course/ (Site)\nhttps://github.com/tidy-survey-r/mapor-2025-short-course/ (Source)"
  },
  {
    "objectID": "full-slide-deck.html#welcome-to-the-towny-data",
    "href": "full-slide-deck.html#welcome-to-the-towny-data",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Welcome to the Towny Data",
    "text": "Welcome to the Towny Data\n\nWe’ll be using the towny data for warm-up exercises\nAvailable in the {gt} package"
  },
  {
    "objectID": "full-slide-deck.html#welcome-to-the-towny-data-1",
    "href": "full-slide-deck.html#welcome-to-the-towny-data-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Welcome to the Towny Data",
    "text": "Welcome to the Towny Data\n\n\nRows: 414\nColumns: 25\n$ name                     &lt;chr&gt; \"Addington Highlands\", \"Adelaide Metcalfe\"…\n$ website                  &lt;chr&gt; \"https://addingtonhighlands.ca\", \"https://…\n$ status                   &lt;chr&gt; \"lower-tier\", \"lower-tier\", \"lower-tier\", …\n$ csd_type                 &lt;chr&gt; \"township\", \"township\", \"township\", \"towns…\n$ census_div               &lt;chr&gt; \"Lennox and Addington\", \"Middlesex\", \"Simc…\n$ latitude                 &lt;dbl&gt; 45.00000, 42.95000, 44.13333, 45.52917, 43…\n$ longitude                &lt;dbl&gt; -77.25000, -81.70000, -79.93333, -76.89694…\n$ land_area_km2            &lt;dbl&gt; 1293.99, 331.11, 371.53, 519.59, 66.64, 11…\n$ population_1996          &lt;int&gt; 2429, 3128, 9359, 2837, 64430, 1027, 8315,…\n$ population_2001          &lt;int&gt; 2402, 3149, 10082, 2824, 73753, 956, 8593,…\n$ population_2006          &lt;int&gt; 2512, 3135, 10695, 2716, 90167, 958, 8654,…\n$ population_2011          &lt;int&gt; 2517, 3028, 10603, 2844, 109600, 864, 9196…\n$ population_2016          &lt;int&gt; 2318, 2990, 10975, 2935, 119677, 969, 9680…\n$ population_2021          &lt;int&gt; 2534, 3011, 10989, 2995, 126666, 954, 9949…\n$ density_1996             &lt;dbl&gt; 1.88, 9.45, 25.19, 5.46, 966.84, 8.81, 21.…\n$ density_2001             &lt;dbl&gt; 1.86, 9.51, 27.14, 5.44, 1106.74, 8.20, 21…\n$ density_2006             &lt;dbl&gt; 1.94, 9.47, 28.79, 5.23, 1353.05, 8.22, 22…\n$ density_2011             &lt;dbl&gt; 1.95, 9.14, 28.54, 5.47, 1644.66, 7.41, 23…\n$ density_2016             &lt;dbl&gt; 1.79, 9.03, 29.54, 5.65, 1795.87, 8.31, 24…\n$ density_2021             &lt;dbl&gt; 1.96, 9.09, 29.58, 5.76, 1900.75, 8.18, 25…\n$ pop_change_1996_2001_pct &lt;dbl&gt; -0.0111, 0.0067, 0.0773, -0.0046, 0.1447, …\n$ pop_change_2001_2006_pct &lt;dbl&gt; 0.0458, -0.0044, 0.0608, -0.0382, 0.2226, …\n$ pop_change_2006_2011_pct &lt;dbl&gt; 0.0020, -0.0341, -0.0086, 0.0471, 0.2155, …\n$ pop_change_2011_2016_pct &lt;dbl&gt; -0.0791, -0.0125, 0.0351, 0.0320, 0.0919, …\n$ pop_change_2016_2021_pct &lt;dbl&gt; 0.0932, 0.0070, 0.0013, 0.0204, 0.0584, -0…"
  },
  {
    "objectID": "full-slide-deck.html#posit-cloud",
    "href": "full-slide-deck.html#posit-cloud",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Posit Cloud",
    "text": "Posit Cloud\n\nWe will be using Posit Cloud for exercises\nPosit Cloud has the same features and appearance as RStudio for ease of use\nAccess the project and files Posit Cloud (requires a free account)\nCreate a permanent copy if you want to save your work and access later"
  },
  {
    "objectID": "full-slide-deck.html#r-packages-for-survey-analysis",
    "href": "full-slide-deck.html#r-packages-for-survey-analysis",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "R Packages for Survey Analysis",
    "text": "R Packages for Survey Analysis\n\n{survey} package first on CRAN in 2003\n\ndescriptive analysis\nstatistical testing\nmodeling\nweighting\n\n{srvyr} package first on CRAN in 2016\n\n“wrapper” for {survey} with {tidyverse}-style syntax\nonly descriptive analysis"
  },
  {
    "objectID": "full-slide-deck.html#install-packages",
    "href": "full-slide-deck.html#install-packages",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Install Packages",
    "text": "Install Packages\nInstall packages for data wrangling and survey analysis:\ninstall.packages(c(\"tidyverse\", \"survey\", \"srvyr\"))\n\nInstall {srvyrexploR} to access the survey data for today’s short course:\ninstall.packages(\"pak\")\npak::pak(\"tidy-survey-r/srvyrexploR\")\n\n\nLoad the packages:\n\n\n\nNote: Installation of packages is already done for you on Posit Cloud"
  },
  {
    "objectID": "full-slide-deck.html#american-national-election-studies-anes-2024",
    "href": "full-slide-deck.html#american-national-election-studies-anes-2024",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "American National Election Studies (ANES) 2024",
    "text": "American National Election Studies (ANES) 2024\n\n\nStored as anes_2024 in {srvyrexploR}\nPre- and post-election surveys fielded almost every 2 years since 1948\nTopics include voter registration status, candidate preference, opinions on country and government, party and ideology affiliation, opinions on policy, news sources, and more\nCollaboration of Stanford, University of Michigan - funding by the National Science Foundation\nTarget Population: US citizens, 18 and older living in US\nMode: In-Person, Web, videoconference, Paper, or telephone\nSample Information: Pseudo-strata and pseudo-cluster included for variance estimation\n\nhttps://electionstudies.org/"
  },
  {
    "objectID": "full-slide-deck.html#american-national-election-studies-anes-2024-1",
    "href": "full-slide-deck.html#american-national-election-studies-anes-2024-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "American National Election Studies (ANES) 2024",
    "text": "American National Election Studies (ANES) 2024\n\n\nRows: 4,964\nColumns: 23\n$ CaseID                  &lt;dbl&gt; 140001, 140002, 140003, 140004, 140005, 140…\n$ InterviewMode_Pre       &lt;fct&gt; 2. Internet (WEB), 2. Internet (WEB), 2. In…\n$ InterviewMode_Post      &lt;fct&gt; 2. Internet (WEB), 2. Internet (WEB), 2. In…\n$ Weight                  &lt;dbl&gt; 0.7809746, 2.5070750, 0.8144009, 0.2634901,…\n$ Stratum                 &lt;dbl&gt; 90, 107, 122, 110, 104, 118, 88, 118, 122, …\n$ VarUnit                 &lt;dbl&gt; 2, 2, 1, 2, 1, 2, 1, 2, 2, 1, 1, 2, 2, 2, 1…\n$ CampaignInterest        &lt;fct&gt; 1. Very much interested, 3. Not much intere…\n$ VotedPres2020           &lt;fct&gt; \"1. Yes, voted\", \"2. No, didn't vote\", \"1. …\n$ VotedPres2020_selection &lt;fct&gt; 2. Donald Trump, NA, 1. Joe Biden, NA, NA, …\n$ PartyID                 &lt;fct&gt; 7. Strong Republican, 4. Independent, 1. St…\n$ TrustGovernment         &lt;fct&gt; 5. Never, 5. Never, 4. Some of the time, 4.…\n$ TrustPeople             &lt;fct&gt; 3. About half the time, 3. About half the t…\n$ Age                     &lt;dbl&gt; 50, 41, 44, 45, 80, 75, 41, 49, 45, 41, 59,…\n$ Education               &lt;dbl&gt; 13, 10, 10, 11, 16, 10, 11, 10, 9, 9, 9, 9,…\n$ RaceEth                 &lt;fct&gt; \"3. Hispanic\", \"4. Asian or Native Hawaiian…\n$ Sex                     &lt;fct&gt; 1. Male, 2. Female, 2. Female, 1. Male, 1. …\n$ Income                  &lt;fct&gt; \"27. $175,000-249,999\", \"26. $150,000-174,9…\n$ EarlyVote2024           &lt;fct&gt; 2. Have not voted, 2. Have not voted, 2. Ha…\n$ VotedPres2024           &lt;fct&gt; \"1. Yes, voted for President\", NA, \"1. Yes,…\n$ VotedPres2024_selection &lt;fct&gt; 2. Donald Trump, NA, 1. Kamala Harris, NA, …\n$ AgeGroup                &lt;fct&gt; 50-59, 40-49, 40-49, 40-49, 70 or older, 70…\n$ EducationGroup          &lt;fct&gt; Bachelor's, Post HS, Post HS, Post HS, Grad…\n$ Income7                 &lt;fct&gt; \"$125k or more\", \"$125k or more\", \"$100k to…"
  },
  {
    "objectID": "full-slide-deck.html#design-object",
    "href": "full-slide-deck.html#design-object",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Design Object",
    "text": "Design Object\n\n\nBackbone for survey analysis\nSpecify the sampling design, weights, and other necessary information to account for errors in the data\nSurvey analysis and inference should be performed with the survey design objects, not the original survey data\nWe will be covering survey design in more detail later!"
  },
  {
    "objectID": "full-slide-deck.html#american-national-election-studies-design-object",
    "href": "full-slide-deck.html#american-national-election-studies-design-object",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "American National Election Studies Design Object",
    "text": "American National Election Studies Design Object"
  },
  {
    "objectID": "full-slide-deck.html#american-national-election-studies-design-object-1",
    "href": "full-slide-deck.html#american-national-election-studies-design-object-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "American National Election Studies Design Object",
    "text": "American National Election Studies Design Object\n\n\nStratified 1 - level Cluster Sampling design (with replacement)\nWith (1934) clusters.\nCalled via srvyr\nSampling variables:\n  - ids: V240108c \n  - strata: V240108d \n  - weights: Weight \nData variables: \n  - CaseID (dbl), InterviewMode_Pre (fct), InterviewMode_Post (fct), Weight\n    (dbl), Stratum (dbl), VarUnit (dbl), CampaignInterest (fct),\n    VotedPres2020 (fct), VotedPres2020_selection (fct), PartyID (fct),\n    TrustGovernment (fct), TrustPeople (fct), Age (dbl), Education (dbl),\n    RaceEth (fct), Sex (fct), Income (fct), EarlyVote2024 (fct),\n    VotedPres2024 (fct), VotedPres2024_selection (fct), AgeGroup (fct),\n    EducationGroup (fct), Income7 (fct), V240001 (dbl), V240002a (hvn_lbll),\n    V240002b (hvn_lbll), V240108b (dbl), V240108d (dbl), V240108c (dbl),\n    V241005 (hvn_lbll), V241103 (hvn_lbll), V241104 (hvn_lbll), V241038\n    (hvn_lbll), V241221 (hvn_lbll), V241222 (hvn_lbll), V241223 (hvn_lbll),\n    V241227x (hvn_lbll), V241229 (hvn_lbll), V241234 (hvn_lbll), V241458x\n    (hvn_lbll), V241463 (hvn_lbll), V241499 (hvn_lbll), V241501x (hvn_lbll),\n    V241550 (hvn_lbll), V241566x (hvn_lbll), V242065 (hvn_lbll), V241035\n    (hvn_lbll), V241037 (hvn_lbll), V242051 (hvn_lbll), V242095x (hvn_lbll),\n    V242066 (hvn_lbll), V241039 (hvn_lbll), V242067 (hvn_lbll), V242096x\n    (hvn_lbll)"
  },
  {
    "objectID": "full-slide-deck.html#why-use-srvyr-over-survey",
    "href": "full-slide-deck.html#why-use-srvyr-over-survey",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Why use {srvyr} over {survey}?",
    "text": "Why use {srvyr} over {survey}?\n\n\nUse the pipe function %&gt;% or |&gt;\nAbility to use tidy selection\nFunctions follow snake_case convention"
  },
  {
    "objectID": "full-slide-deck.html#apply-dplyr-functions-to-survey-objects",
    "href": "full-slide-deck.html#apply-dplyr-functions-to-survey-objects",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Apply {dplyr} functions to survey objects",
    "text": "Apply {dplyr} functions to survey objects\n\nA few functions in {srvyr} have counterparts in {dplyr}\n\ndplyr::summarize() and srvyr::summarize()\ndplyr::group_by() and srvyr::group_by()\n\nBased on the object class, R will recognize which package to use"
  },
  {
    "objectID": "full-slide-deck.html#using-summarize-to-calculate-mean-and-median",
    "href": "full-slide-deck.html#using-summarize-to-calculate-mean-and-median",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Using summarize() to calculate mean and median",
    "text": "Using summarize() to calculate mean and median\nTibble:\n\n\n# A tibble: 1 × 1\n  area_mean\n      &lt;dbl&gt;\n1      373."
  },
  {
    "objectID": "full-slide-deck.html#using-summarize-to-calculate-mean-and-median-1",
    "href": "full-slide-deck.html#using-summarize-to-calculate-mean-and-median-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Using summarize() to calculate mean and median",
    "text": "Using summarize() to calculate mean and median\nSurvey object:\n\n\n# A tibble: 1 × 2\n  age_mean age_mean_se\n     &lt;dbl&gt;       &lt;dbl&gt;\n1     48.5       0.445"
  },
  {
    "objectID": "full-slide-deck.html#using-dplyr-functions",
    "href": "full-slide-deck.html#using-dplyr-functions",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Using {dplyr} functions",
    "text": "Using {dplyr} functions\nTibble:\n\n\n# A tibble: 195 × 2\n   csd_type name                  \n   &lt;chr&gt;    &lt;chr&gt;                 \n 1 township Addington Highlands   \n 2 township Adelaide Metcalfe     \n 3 township Adjala-Tosorontio     \n 4 township Admaston/Bromley      \n 5 township Alberton              \n 6 township Alfred and Plantagenet\n 7 township Algonquin Highlands   \n 8 township Alnwick/Haldimand     \n 9 township Amaranth              \n10 township The Archipelago       \n# ℹ 185 more rows"
  },
  {
    "objectID": "full-slide-deck.html#using-dplyr-functions-1",
    "href": "full-slide-deck.html#using-dplyr-functions-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Using {dplyr} functions",
    "text": "Using {dplyr} functions\nSurvey object:\n\n\nStratified 1 - level Cluster Sampling design (with replacement)\nWith (492) clusters.\nCalled via srvyr\nSampling variables:\n  - ids: V240108c \n  - strata: V240108d \n  - weights: Weight \nData variables: \n  - Sex (fct)"
  },
  {
    "objectID": "full-slide-deck.html#grouping",
    "href": "full-slide-deck.html#grouping",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Grouping",
    "text": "Grouping\nTibble:\n\n\n# A tibble: 5 × 2\n  csd_type     area_mean\n  &lt;chr&gt;            &lt;dbl&gt;\n1 city             498. \n2 municipality     607. \n3 town             183. \n4 township         363. \n5 village           23.0"
  },
  {
    "objectID": "full-slide-deck.html#grouping-1",
    "href": "full-slide-deck.html#grouping-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Grouping",
    "text": "Grouping\nSurvey object:\n\n\n# A tibble: 6 × 3\n  EducationGroup age_mean age_mean_se\n  &lt;fct&gt;             &lt;dbl&gt;       &lt;dbl&gt;\n1 Less than HS       50.1       1.76 \n2 High school        48.3       0.904\n3 Post HS            48.2       0.709\n4 Bachelor's         46.5       0.731\n5 Graduate           51.8       0.797\n6 &lt;NA&gt;               52.9       4.76"
  },
  {
    "objectID": "full-slide-deck.html#using-srvyr-functions-on-non-survey-objects",
    "href": "full-slide-deck.html#using-srvyr-functions-on-non-survey-objects",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Using {srvyr} functions on non-survey objects",
    "text": "Using {srvyr} functions on non-survey objects\n\n\n\nError in `summarize()`:\nℹ In argument: `area_mean = survey_mean(land_area_km2)`.\nCaused by error in `cur_svy()`:\n! Survey context not set"
  },
  {
    "objectID": "full-slide-deck.html#overview-of-survey-analysis-using-srvyr-package",
    "href": "full-slide-deck.html#overview-of-survey-analysis-using-srvyr-package",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Overview of Survey Analysis using {srvyr} Package",
    "text": "Overview of Survey Analysis using {srvyr} Package\n\n\nCreate a tbl_svy object (a survey object) using: as_survey_design() or as_survey_rep()\nSubset data (if needed) using filter() (to create subpopulations)\nSpecify domains of analysis using group_by()\nWithin summarize(), specify variables to calculate, including means, totals, proportions, quantiles, and more"
  },
  {
    "objectID": "full-slide-deck.html#introduction-1",
    "href": "full-slide-deck.html#introduction-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Introduction",
    "text": "Introduction\nDescriptive analyses lay the groundwork for the next steps of running statistical tests or developing models.\n\nCalculate point estimates of…\n\nUnknown population parameters, such as mean.\n\n\n\n\nUncertainty estimates, such as confidence intervals."
  },
  {
    "objectID": "full-slide-deck.html#types-of-data",
    "href": "full-slide-deck.html#types-of-data",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Types of data",
    "text": "Types of data\n\nCategorical/nominal data: variables with levels or descriptions that cannot be ordered, such as the region of the country (North, South, East, and West)\n\n\n\nOrdinal data: variables that can be ordered, such as those from a Likert scale (strongly disagree, disagree, agree, and strongly agree)\nDiscrete data: variables that are counted or measured, such as number of children\nContinuous data: variables that are measured and whose values can lie anywhere on an interval, such as income"
  },
  {
    "objectID": "full-slide-deck.html#types-of-measures",
    "href": "full-slide-deck.html#types-of-measures",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Types of measures",
    "text": "Types of measures\n\nMeasures of distribution describe how often an event or response occurs.\n\nCount of observations with survey_count()\n\nMeasures of central tendency find the central (or average) responses.\n\nProportions with survey_prop() and survey_total()"
  },
  {
    "objectID": "full-slide-deck.html#overview-of-survey-analysis-using-the-srvyr-package",
    "href": "full-slide-deck.html#overview-of-survey-analysis-using-the-srvyr-package",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Overview of survey analysis using the {srvyr} package",
    "text": "Overview of survey analysis using the {srvyr} package\n\n\nCreate a tbl_svy object (a survey object) using: as_survey_design() or as_survey_rep()\n\n\n\nSubset data (if needed) using filter() (to create subpopulations)\nSpecify domains of analysis using group_by()\nSpecify variables to calculate, including means, totals, proportions, quantiles, and more"
  },
  {
    "objectID": "full-slide-deck.html#survey_count",
    "href": "full-slide-deck.html#survey_count",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_count()",
    "text": "survey_count()\n\n\nCalculate the estimated observation counts for a given variable or combination of variables\nApplied to categorical data\nSometimes called “cross-tabulations” or “cross-tabs”\nsurvey_count() functions similarly to dplyr::count() in that it is NOT called within summarize()"
  },
  {
    "objectID": "full-slide-deck.html#survey_count-syntax",
    "href": "full-slide-deck.html#survey_count-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_count(): syntax",
    "text": "survey_count(): syntax\n\nsurvey_count(\n  x,\n  ...,\n  wt = NULL,\n  sort = FALSE,\n  name = \"n\",\n  .drop = dplyr::group_by_drop_default(x),\n  vartype = c(\"se\", \"ci\", \"var\", \"cv\")\n)"
  },
  {
    "objectID": "full-slide-deck.html#survey_count-example",
    "href": "full-slide-deck.html#survey_count-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_count: example",
    "text": "survey_count: example\nEstimate the number of U.S. adults (18+) living in the continental United States using ANES data:\n\nanes_des %&gt;%\n  survey_count()\n\n\n\n# A tibble: 1 × 2\n          n     n_se\n      &lt;dbl&gt;    &lt;dbl&gt;\n1 232449541 5069171."
  },
  {
    "objectID": "full-slide-deck.html#survey_count-subgroup-example",
    "href": "full-slide-deck.html#survey_count-subgroup-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_count: subgroup example",
    "text": "survey_count: subgroup example\nCalculate the weighted estimate of respondents by voting status in the 2024 election:\n\nanes_des %&gt;%\n  survey_count(\n    VotedPres2024, \n    name = \"N\"\n    )\n\n\n\n# A tibble: 3 × 3\n  VotedPres2024                             N     N_se\n  &lt;fct&gt;                                 &lt;dbl&gt;    &lt;dbl&gt;\n1 1. Yes, voted for President      170473497. 4000913.\n2 2. No, didn't vote for President   1887456.  401215.\n3 &lt;NA&gt;                              60088589. 3058218."
  },
  {
    "objectID": "full-slide-deck.html#survey_total-syntax",
    "href": "full-slide-deck.html#survey_total-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_total(): syntax",
    "text": "survey_total(): syntax\n\nThe survey_total() function is analogous to sum()\nsurvey_total() must be used within summarize()\nIf used with no x-variable, survey_total() calculates a population count estimate within summarize()"
  },
  {
    "objectID": "full-slide-deck.html#survey_total-example",
    "href": "full-slide-deck.html#survey_total-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_total(): example",
    "text": "survey_total(): example\nEstimate the number of U.S. adults (18+) living in the continental United States using ANES data:\n\nanes_des %&gt;%\n  summarize(\n    survey_total()\n  )\n\n# A tibble: 1 × 2\n       coef    `_se`\n      &lt;dbl&gt;    &lt;dbl&gt;\n1 232449541 5069171."
  },
  {
    "objectID": "full-slide-deck.html#unweighted",
    "href": "full-slide-deck.html#unweighted",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "unweighted()",
    "text": "unweighted()\n\n\nSometimes, it is helpful to calculate an unweighted estimate of a given variable\nunweighted() does not extrapolate to a population estimate\nUsed in conjunction with any {dplyr} functions"
  },
  {
    "objectID": "full-slide-deck.html#unweighted-example",
    "href": "full-slide-deck.html#unweighted-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "unweighted(): example",
    "text": "unweighted(): example\nCalculate the weighted and unweighted number of survey respondents:\n\nanes_des %&gt;%\n  summarize(\n    n_unweighted = unweighted(n()),\n    n_weighted = survey_total()\n  )\n\n# A tibble: 1 × 3\n  n_unweighted n_weighted n_weighted_se\n         &lt;int&gt;      &lt;dbl&gt;         &lt;dbl&gt;\n1         4764  232449541      5069171."
  },
  {
    "objectID": "full-slide-deck.html#survey_prop",
    "href": "full-slide-deck.html#survey_prop",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_prop()",
    "text": "survey_prop()\n\n\nCalculate the estimated observation counts for a given variable or combination of variables\nsurvey_prop() to categorical data\nMust be called within summarize()"
  },
  {
    "objectID": "full-slide-deck.html#survey_prop-syntax",
    "href": "full-slide-deck.html#survey_prop-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_prop(): syntax",
    "text": "survey_prop(): syntax\n\nsurvey_prop(\n  na.rm = FALSE,\n  vartype = c(\"se\", \"ci\", \"var\", \"cv\"),\n  level = 0.95,\n  proportion = TRUE,\n  prop_method =\n    c(\"logit\", \"likelihood\", \"asin\", \"beta\", \"mean\", \"xlogit\"),\n  deff = FALSE,\n  df = NULL\n)"
  },
  {
    "objectID": "full-slide-deck.html#survey_prop-one-variable-proportion-example",
    "href": "full-slide-deck.html#survey_prop-one-variable-proportion-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_prop(): one variable proportion example",
    "text": "survey_prop(): one variable proportion example\nCalculate the proportion of respondents by voting status in the 2024 election:\n\nanes_des %&gt;%\n  group_by(VotedPres2024) %&gt;%\n  summarize(p = survey_prop())\n\n# A tibble: 3 × 3\n  VotedPres2024                          p    p_se\n  &lt;fct&gt;                              &lt;dbl&gt;   &lt;dbl&gt;\n1 1. Yes, voted for President      0.733   0.0108 \n2 2. No, didn't vote for President 0.00812 0.00173\n3 &lt;NA&gt;                             0.259   0.0106"
  },
  {
    "objectID": "full-slide-deck.html#survey_prop-conditional-proportions-example",
    "href": "full-slide-deck.html#survey_prop-conditional-proportions-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_prop(): conditional proportions example",
    "text": "survey_prop(): conditional proportions example\nCalculate the proportion of whether someone voted by campaign interest:\n\nanes_des %&gt;%\n  group_by(VotedPres2024, CampaignInterest) %&gt;%\n  summarize(p = survey_prop())\n\n# A tibble: 10 × 4\n# Groups:   VotedPres2024 [3]\n   VotedPres2024                    CampaignInterest              p    p_se\n   &lt;fct&gt;                            &lt;fct&gt;                     &lt;dbl&gt;   &lt;dbl&gt;\n 1 1. Yes, voted for President      1. Very much interested 0.537   0.0114 \n 2 1. Yes, voted for President      2. Somewhat interested  0.372   0.0115 \n 3 1. Yes, voted for President      3. Not much interested  0.0914  0.00653\n 4 2. No, didn't vote for President 1. Very much interested 0.191   0.0770 \n 5 2. No, didn't vote for President 2. Somewhat interested  0.359   0.0981 \n 6 2. No, didn't vote for President 3. Not much interested  0.451   0.108  \n 7 &lt;NA&gt;                             1. Very much interested 0.228   0.0187 \n 8 &lt;NA&gt;                             2. Somewhat interested  0.452   0.0211 \n 9 &lt;NA&gt;                             3. Not much interested  0.319   0.0196 \n10 &lt;NA&gt;                             &lt;NA&gt;                    0.00140 0.00140"
  },
  {
    "objectID": "full-slide-deck.html#survey_prop-joint-proportions-example",
    "href": "full-slide-deck.html#survey_prop-joint-proportions-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "survey_prop(): joint proportions example",
    "text": "survey_prop(): joint proportions example\nCalculate the joint proportions for each variable combination using interact():\n\nanes_des %&gt;%\n  group_by(interact(VotedPres2024, CampaignInterest)) %&gt;%\n  summarize(p = survey_prop())\n\n# A tibble: 10 × 4\n   VotedPres2024                    CampaignInterest               p     p_se\n   &lt;fct&gt;                            &lt;fct&gt;                      &lt;dbl&gt;    &lt;dbl&gt;\n 1 1. Yes, voted for President      1. Very much interested 0.394    0.00999 \n 2 1. Yes, voted for President      2. Somewhat interested  0.272    0.00974 \n 3 1. Yes, voted for President      3. Not much interested  0.0671   0.00474 \n 4 2. No, didn't vote for President 1. Very much interested 0.00155  0.000681\n 5 2. No, didn't vote for President 2. Somewhat interested  0.00291  0.000959\n 6 2. No, didn't vote for President 3. Not much interested  0.00366  0.00126 \n 7 &lt;NA&gt;                             1. Very much interested 0.0589   0.00512 \n 8 &lt;NA&gt;                             2. Somewhat interested  0.117    0.00747 \n 9 &lt;NA&gt;                             3. Not much interested  0.0824   0.00626 \n10 &lt;NA&gt;                             &lt;NA&gt;                    0.000361 0.000361"
  },
  {
    "objectID": "full-slide-deck.html#filter",
    "href": "full-slide-deck.html#filter",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "filter()",
    "text": "filter()\n\n\nAllows for subpopulation analysis\nUse filter() to subset a survey object for analysis\nMust be done after creating the survey design object"
  },
  {
    "objectID": "full-slide-deck.html#filter-example-1",
    "href": "full-slide-deck.html#filter-example-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "filter(): example",
    "text": "filter(): example\nEstimate the proportion of 2024 voters among respondents who voted in 2020:\n\nanes_des %&gt;%\n  filter(VotedPres2020 == \"1. Yes, voted\") %&gt;%\n  group_by(VotedPres2024) %&gt;%\n  summarize(\n    survey_prop()\n  )\n\n# A tibble: 3 × 3\n  VotedPres2024                       coef   `_se`\n  &lt;fct&gt;                              &lt;dbl&gt;   &lt;dbl&gt;\n1 1. Yes, voted for President      0.860   0.0102 \n2 2. No, didn't vote for President 0.00781 0.00189\n3 &lt;NA&gt;                             0.133   0.0101"
  },
  {
    "objectID": "full-slide-deck.html#cascade",
    "href": "full-slide-deck.html#cascade",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "cascade()",
    "text": "cascade()\n\n\nThe {srvyr} package has the convenient cascade() function\nUsed instead of summarize()\nCreates a summary row for the estimate representing the entire population"
  },
  {
    "objectID": "full-slide-deck.html#cascade-syntax",
    "href": "full-slide-deck.html#cascade-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "cascade(): syntax",
    "text": "cascade(): syntax\ncascade(\n  .data, \n  ..., \n  .fill = NA, \n  .fill_level_top = FALSE, \n  .groupings = NULL\n)"
  },
  {
    "objectID": "full-slide-deck.html#cascade-example",
    "href": "full-slide-deck.html#cascade-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "cascade(): example",
    "text": "cascade(): example\nEstimate the share of respondents who did and did not vote in the 2024 election, then demonstrate the features of cascade():\n\nanes_des %&gt;%\n  group_by(VotedPres2024) %&gt;%\n  cascade(prop = survey_prop())\n\n# A tibble: 4 × 3\n  VotedPres2024                       prop prop_se\n  &lt;fct&gt;                              &lt;dbl&gt;   &lt;dbl&gt;\n1 1. Yes, voted for President      0.733   0.0108 \n2 2. No, didn't vote for President 0.00812 0.00173\n3 &lt;NA&gt;                             0.259   0.0106 \n4 &lt;NA&gt;                             1.000   0"
  },
  {
    "objectID": "full-slide-deck.html#cascade-example-1",
    "href": "full-slide-deck.html#cascade-example-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "cascade(): example",
    "text": "cascade(): example\nGive the summary row a better name with .fill:\n\nanes_des %&gt;%\n  group_by(VotedPres2024) %&gt;%\n  cascade(prop = survey_prop(),\n          .fill = \"All\")"
  },
  {
    "objectID": "full-slide-deck.html#cascade-example-2",
    "href": "full-slide-deck.html#cascade-example-2",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "cascade(): example",
    "text": "cascade(): example\nMove the summary row to the top with .fill_level_top = TRUE:\n\nanes_des %&gt;%\n  group_by(VotedPres2024) %&gt;%\n  cascade(prop = survey_prop(),\n          .fill = \"All\",\n          .fill_level_top = TRUE)\n\n# A tibble: 4 × 3\n  VotedPres2024                       prop prop_se\n  &lt;fct&gt;                              &lt;dbl&gt;   &lt;dbl&gt;\n1 All                              1.000   0      \n2 1. Yes, voted for President      0.733   0.0108 \n3 2. No, didn't vote for President 0.00812 0.00173\n4 &lt;NA&gt;                             0.259   0.0106"
  },
  {
    "objectID": "full-slide-deck.html#chi-square-tests-1",
    "href": "full-slide-deck.html#chi-square-tests-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Chi-square tests",
    "text": "Chi-square tests\n\nCompare multiple proportions to see if they are statistically different from each other\n\n\n\nDifferent types:\n\nGoodness-of-fit tests compare observed data to expected data\nTests of independence compare two types of observed data to see if there is a relationship\nTests of homogeneity compare two distributions to see if they match"
  },
  {
    "objectID": "full-slide-deck.html#chi-square-syntax",
    "href": "full-slide-deck.html#chi-square-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Chi-square syntax",
    "text": "Chi-square syntax\nThere are two functions that we use to compare proportions:\n\nsvygofchisq(): For goodness-of-fit tests\nsvychisq(): For tests of independence and homogeneity"
  },
  {
    "objectID": "full-slide-deck.html#syntax-for-goodness-of-fit-tests",
    "href": "full-slide-deck.html#syntax-for-goodness-of-fit-tests",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Syntax for goodness-of-fit tests",
    "text": "Syntax for goodness-of-fit tests"
  },
  {
    "objectID": "full-slide-deck.html#syntax-for-tests-of-independence-and-homogeneity",
    "href": "full-slide-deck.html#syntax-for-tests-of-independence-and-homogeneity",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Syntax for tests of independence and homogeneity",
    "text": "Syntax for tests of independence and homogeneity"
  },
  {
    "objectID": "full-slide-deck.html#example-goodness-of-fit-test-1",
    "href": "full-slide-deck.html#example-goodness-of-fit-test-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: goodness-of-fit test",
    "text": "Example: goodness-of-fit test\n\nLet’s check to see if the education levels from the ANES match the levels from the ACS\nHere is the education breakdown from the ACS in 2024\n\n10% had less than a high school degree\n27% had a high school degree\n29% had some college or an associate’s degree\n34% had a bachelor’s degree or higher"
  },
  {
    "objectID": "full-slide-deck.html#example-goodness-of-fit-test-2",
    "href": "full-slide-deck.html#example-goodness-of-fit-test-2",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: goodness-of-fit test",
    "text": "Example: goodness-of-fit test\n\nLet’s check to see if the education levels from the ANES match the levels from the ACS\nHere is the education breakdown from our survey data\n\n\n\n# A tibble: 5 × 3\n  EducationGroup      p    p_se\n  &lt;fct&gt;           &lt;dbl&gt;   &lt;dbl&gt;\n1 Less than HS   0.0824 0.00673\n2 High school    0.270  0.00948\n3 Post HS        0.302  0.00923\n4 Bachelor's     0.213  0.00816\n5 Graduate       0.132  0.00633\n\n\n\n\nUse drop_na() to first remove any missing data from the Education variable\nUse group_by() and summarize() to get the proportions by Education level"
  },
  {
    "objectID": "full-slide-deck.html#example-goodness-of-fit-test-3",
    "href": "full-slide-deck.html#example-goodness-of-fit-test-3",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: goodness-of-fit test",
    "text": "Example: goodness-of-fit test\nLet’s collapse Bachelor’s and Graduate degrees into a single category for comparison."
  },
  {
    "objectID": "full-slide-deck.html#example-goodness-of-fit-test-4",
    "href": "full-slide-deck.html#example-goodness-of-fit-test-4",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: goodness-of-fit test",
    "text": "Example: goodness-of-fit test\n\n\n# A tibble: 4 × 3\n  Education2              p    p_se\n  &lt;fct&gt;               &lt;dbl&gt;   &lt;dbl&gt;\n1 Less than HS       0.0824 0.00673\n2 High school        0.270  0.00948\n3 Post HS            0.302  0.00923\n4 Bachelor or Higher 0.346  0.00914"
  },
  {
    "objectID": "full-slide-deck.html#example-goodness-of-fit-test-5",
    "href": "full-slide-deck.html#example-goodness-of-fit-test-5",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: goodness-of-fit test",
    "text": "Example: goodness-of-fit test\nTest to see if the ANES education matches the population percentages\n\n\nError in UseMethod(\"svytotal\", design): no applicable method for 'svytotal' applied to an object of class \"formula\"\n\n\n\n\nas design argument is the second argument, dot notation is needed"
  },
  {
    "objectID": "full-slide-deck.html#dot-notation-1",
    "href": "full-slide-deck.html#dot-notation-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Dot notation",
    "text": "Dot notation\nLet’s walk through an example using the towny data.\n\n\n# A tibble: 414 × 25\n   name   website status csd_type census_div latitude longitude land_area_km2\n   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 Addin… https:… lower… township Lennox an…     45       -77.2        1294. \n 2 Adela… https:… lower… township Middlesex      43.0     -81.7         331. \n 3 Adjal… https:… lower… township Simcoe         44.1     -79.9         372. \n 4 Admas… https:… lower… township Renfrew        45.5     -76.9         520. \n 5 Ajax   https:… lower… town     Durham         43.9     -79.0          66.6\n 6 Alber… https:… singl… township Rainy Riv…     48.6     -93.5         117. \n 7 Alfre… https:… lower… township Prescott …     45.6     -74.9         392. \n 8 Algon… https:… lower… township Haliburton     45.4     -78.8        1000. \n 9 Alnwi… https:… lower… township Northumbe…     44.1     -78.0         398. \n10 Amara… https:… lower… township Dufferin       44.0     -80.2         265. \n# ℹ 404 more rows\n# ℹ 17 more variables: population_1996 &lt;int&gt;, population_2001 &lt;int&gt;,\n#   population_2006 &lt;int&gt;, population_2011 &lt;int&gt;, population_2016 &lt;int&gt;,\n#   population_2021 &lt;int&gt;, density_1996 &lt;dbl&gt;, density_2001 &lt;dbl&gt;,\n#   density_2006 &lt;dbl&gt;, density_2011 &lt;dbl&gt;, density_2016 &lt;dbl&gt;,\n#   density_2021 &lt;dbl&gt;, pop_change_1996_2001_pct &lt;dbl&gt;,\n#   pop_change_2001_2006_pct &lt;dbl&gt;, pop_change_2006_2011_pct &lt;dbl&gt;, …"
  },
  {
    "objectID": "full-slide-deck.html#dot-notation-2",
    "href": "full-slide-deck.html#dot-notation-2",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Dot notation",
    "text": "Dot notation\nUsing the towny data, let’s filter to only cities.\n\n\n# A tibble: 52 × 25\n   name   website status csd_type census_div latitude longitude land_area_km2\n   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 Barrie https:… singl… city     Simcoe         44.4     -79.7          99.0\n 2 Belle… https:… singl… city     Hastings       44.2     -77.4         247. \n 3 Bramp… https:… lower… city     Peel           43.7     -79.8         266. \n 4 Brant  https:… singl… city     Brant          43.1     -80.4         818. \n 5 Brant… https:… singl… city     Brant          43.1     -80.3          98.6\n 6 Brock… https:… singl… city     Leeds and…     44.6     -75.7          20.9\n 7 Burli… https:… lower… city     Halton         43.4     -79.8         186. \n 8 Cambr… https:… lower… city     Waterloo       43.4     -80.3         113. \n 9 Clare… https:… lower… city     Prescott …     45.5     -75.2         297. \n10 Cornw… https:… singl… city     Stormont,…     45.0     -74.7          61.5\n# ℹ 42 more rows\n# ℹ 17 more variables: population_1996 &lt;int&gt;, population_2001 &lt;int&gt;,\n#   population_2006 &lt;int&gt;, population_2011 &lt;int&gt;, population_2016 &lt;int&gt;,\n#   population_2021 &lt;int&gt;, density_1996 &lt;dbl&gt;, density_2001 &lt;dbl&gt;,\n#   density_2006 &lt;dbl&gt;, density_2011 &lt;dbl&gt;, density_2016 &lt;dbl&gt;,\n#   density_2021 &lt;dbl&gt;, pop_change_1996_2001_pct &lt;dbl&gt;,\n#   pop_change_2001_2006_pct &lt;dbl&gt;, pop_change_2006_2011_pct &lt;dbl&gt;, …"
  },
  {
    "objectID": "full-slide-deck.html#dot-notation-3",
    "href": "full-slide-deck.html#dot-notation-3",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Dot notation",
    "text": "Dot notation\nUsing the towny data, let’s filter to only cities.\n\n\n# A tibble: 52 × 25\n   name   website status csd_type census_div latitude longitude land_area_km2\n   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 Barrie https:… singl… city     Simcoe         44.4     -79.7          99.0\n 2 Belle… https:… singl… city     Hastings       44.2     -77.4         247. \n 3 Bramp… https:… lower… city     Peel           43.7     -79.8         266. \n 4 Brant  https:… singl… city     Brant          43.1     -80.4         818. \n 5 Brant… https:… singl… city     Brant          43.1     -80.3          98.6\n 6 Brock… https:… singl… city     Leeds and…     44.6     -75.7          20.9\n 7 Burli… https:… lower… city     Halton         43.4     -79.8         186. \n 8 Cambr… https:… lower… city     Waterloo       43.4     -80.3         113. \n 9 Clare… https:… lower… city     Prescott …     45.5     -75.2         297. \n10 Cornw… https:… singl… city     Stormont,…     45.0     -74.7          61.5\n# ℹ 42 more rows\n# ℹ 17 more variables: population_1996 &lt;int&gt;, population_2001 &lt;int&gt;,\n#   population_2006 &lt;int&gt;, population_2011 &lt;int&gt;, population_2016 &lt;int&gt;,\n#   population_2021 &lt;int&gt;, density_1996 &lt;dbl&gt;, density_2001 &lt;dbl&gt;,\n#   density_2006 &lt;dbl&gt;, density_2011 &lt;dbl&gt;, density_2016 &lt;dbl&gt;,\n#   density_2021 &lt;dbl&gt;, pop_change_1996_2001_pct &lt;dbl&gt;,\n#   pop_change_2001_2006_pct &lt;dbl&gt;, pop_change_2006_2011_pct &lt;dbl&gt;, …"
  },
  {
    "objectID": "full-slide-deck.html#dot-notation-4",
    "href": "full-slide-deck.html#dot-notation-4",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Dot notation",
    "text": "Dot notation\nUsing the towny data, let’s filter to only cities.\n\n\n# A tibble: 52 × 25\n   name   website status csd_type census_div latitude longitude land_area_km2\n   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 Barrie https:… singl… city     Simcoe         44.4     -79.7          99.0\n 2 Belle… https:… singl… city     Hastings       44.2     -77.4         247. \n 3 Bramp… https:… lower… city     Peel           43.7     -79.8         266. \n 4 Brant  https:… singl… city     Brant          43.1     -80.4         818. \n 5 Brant… https:… singl… city     Brant          43.1     -80.3          98.6\n 6 Brock… https:… singl… city     Leeds and…     44.6     -75.7          20.9\n 7 Burli… https:… lower… city     Halton         43.4     -79.8         186. \n 8 Cambr… https:… lower… city     Waterloo       43.4     -80.3         113. \n 9 Clare… https:… lower… city     Prescott …     45.5     -75.2         297. \n10 Cornw… https:… singl… city     Stormont,…     45.0     -74.7          61.5\n# ℹ 42 more rows\n# ℹ 17 more variables: population_1996 &lt;int&gt;, population_2001 &lt;int&gt;,\n#   population_2006 &lt;int&gt;, population_2011 &lt;int&gt;, population_2016 &lt;int&gt;,\n#   population_2021 &lt;int&gt;, density_1996 &lt;dbl&gt;, density_2001 &lt;dbl&gt;,\n#   density_2006 &lt;dbl&gt;, density_2011 &lt;dbl&gt;, density_2016 &lt;dbl&gt;,\n#   density_2021 &lt;dbl&gt;, pop_change_1996_2001_pct &lt;dbl&gt;,\n#   pop_change_2001_2006_pct &lt;dbl&gt;, pop_change_2006_2011_pct &lt;dbl&gt;, …"
  },
  {
    "objectID": "full-slide-deck.html#dot-notation-5",
    "href": "full-slide-deck.html#dot-notation-5",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Dot notation",
    "text": "Dot notation\nUsing the towny data, let’s filter to only cities.\n\n\n# A tibble: 52 × 25\n   name   website status csd_type census_div latitude longitude land_area_km2\n   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 Barrie https:… singl… city     Simcoe         44.4     -79.7          99.0\n 2 Belle… https:… singl… city     Hastings       44.2     -77.4         247. \n 3 Bramp… https:… lower… city     Peel           43.7     -79.8         266. \n 4 Brant  https:… singl… city     Brant          43.1     -80.4         818. \n 5 Brant… https:… singl… city     Brant          43.1     -80.3          98.6\n 6 Brock… https:… singl… city     Leeds and…     44.6     -75.7          20.9\n 7 Burli… https:… lower… city     Halton         43.4     -79.8         186. \n 8 Cambr… https:… lower… city     Waterloo       43.4     -80.3         113. \n 9 Clare… https:… lower… city     Prescott …     45.5     -75.2         297. \n10 Cornw… https:… singl… city     Stormont,…     45.0     -74.7          61.5\n# ℹ 42 more rows\n# ℹ 17 more variables: population_1996 &lt;int&gt;, population_2001 &lt;int&gt;,\n#   population_2006 &lt;int&gt;, population_2011 &lt;int&gt;, population_2016 &lt;int&gt;,\n#   population_2021 &lt;int&gt;, density_1996 &lt;dbl&gt;, density_2001 &lt;dbl&gt;,\n#   density_2006 &lt;dbl&gt;, density_2011 &lt;dbl&gt;, density_2016 &lt;dbl&gt;,\n#   density_2021 &lt;dbl&gt;, pop_change_1996_2001_pct &lt;dbl&gt;,\n#   pop_change_2001_2006_pct &lt;dbl&gt;, pop_change_2006_2011_pct &lt;dbl&gt;, …"
  },
  {
    "objectID": "full-slide-deck.html#results-goodness-of-fit-test",
    "href": "full-slide-deck.html#results-goodness-of-fit-test",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Results: goodness-of-fit test",
    "text": "Results: goodness-of-fit test\nTest to see if the ANES education matches the population percentages\n\n\n\n    Design-based chi-squared test for given probabilities\n\ndata:  ~Education2\nX-squared = 848588, scale = 1.7316e+05, df = 2.1514e+00, p-value =\n0.0983"
  },
  {
    "objectID": "full-slide-deck.html#results-goodness-of-fit-test-1",
    "href": "full-slide-deck.html#results-goodness-of-fit-test-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Results: goodness-of-fit test",
    "text": "Results: goodness-of-fit test"
  },
  {
    "objectID": "full-slide-deck.html#example-test-of-independence-1",
    "href": "full-slide-deck.html#example-test-of-independence-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: test of independence",
    "text": "Example: test of independence\nANES asked respondents two questions about trust:\n\nQuestion text: “How often can you trust the federal government to do what is right?”\nQuestion text: “How often can you trust other people?”\n\nRun a test of independence to see if there is a relationship between these two questions."
  },
  {
    "objectID": "full-slide-deck.html#example-test-of-independence-2",
    "href": "full-slide-deck.html#example-test-of-independence-2",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: test of independence",
    "text": "Example: test of independence\nRun a test of independence to see if there is a relationship between these two questions.\n\n\n\n    Design-based Wald test of association\n\ndata:  NextMethod()\nF = 13.611, ndf = 16, ddf = 1803, p-value &lt; 2.2e-16\n\n\n\n\nNull Hypothesis: Independent (no relationship)\nAlt Hypothesis: Not Independent (relationship)\n\np-value &gt; 0.05, so there is a relationship between these two variables"
  },
  {
    "objectID": "full-slide-deck.html#example-test-of-independence-3",
    "href": "full-slide-deck.html#example-test-of-independence-3",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: test of independence",
    "text": "Example: test of independence\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTrust in Government\n\nTrust in People\n\n\n\n1. Always\n2. Most of the time\n3. About half the time\n4. Some of the time\n5. Never\n\n\n\n\n1. Always\n0.182 (0.011, 0.352)\n0.011 (0.003, 0.018)\n0.009 (0.001, 0.018)\n0.009 (0.003, 0.014)\n0.034 (-0.001, 0.07)\n\n\n2. Most of the time\n0.219 (0.11, 0.328)\n0.177 (0.157, 0.198)\n0.09 (0.069, 0.111)\n0.103 (0.077, 0.128)\n0.036 (0.007, 0.065)\n\n\n3. About half the time\n0.228 (0.043, 0.414)\n0.303 (0.273, 0.334)\n0.37 (0.331, 0.41)\n0.198 (0.165, 0.23)\n0.11 (0.061, 0.158)\n\n\n4. Some of the time\n0.162 (0.046, 0.279)\n0.417 (0.385, 0.449)\n0.383 (0.348, 0.418)\n0.509 (0.465, 0.553)\n0.327 (0.231, 0.423)\n\n\n5. Never\n0.208 (0.069, 0.347)\n0.091 (0.074, 0.109)\n0.147 (0.121, 0.173)\n0.182 (0.151, 0.212)\n0.493 (0.399, 0.587)"
  },
  {
    "objectID": "full-slide-deck.html#introduction-2",
    "href": "full-slide-deck.html#introduction-2",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Introduction",
    "text": "Introduction\n\n\nModeling investigates the relationship between a single dependent variable and one or more independent variables.\nLogistic regression is a specific case of the generalized linear model (GLM).\nLogistic regression is used to model binary outcomes, such as whether or not someone voted."
  },
  {
    "objectID": "full-slide-deck.html#introduction-3",
    "href": "full-slide-deck.html#introduction-3",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Introduction",
    "text": "Introduction\nAssumptions in logistic regression using survey data include:\n\nThe outcome variable has two levels\nThere is a linear relationship between the independent variables and the log odds (the equation for the logit function)\nThe residuals are homoscedastic; that is, the error term is the same across all values of independent variables"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-syntax",
    "href": "full-slide-deck.html#svyglm-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: syntax",
    "text": "svyglm: syntax\ndes_obj %&gt;%\n  svyglm(\n    formula = outcomevar ~ x1 + x2 + x3,\n    design = .,\n    na.action = na.omit,\n    df.resid = NULL,\n    family = quasibinomial\n  )"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example",
    "href": "full-slide-deck.html#svyglm-example",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\nModel whether a person usually trusts the government based on who they voted for in 20241:\n\n\nCreate a binary trust variable by grouping ‘Always’ and ‘Most of the time’ into one category, and all remaining responses into the other.\n\n\nanes_des_der &lt;- anes_des %&gt;%\n  mutate(TrustGovernmentUsually = case_when(\n    is.na(TrustGovernment) ~ NA,\n    TRUE ~ TrustGovernment %in% c(\"1. Always\", \"2. Most of the time\")\n  ))\n\n\nhttps://electionstudies.org/data-center/20204time-series-study/"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example-1",
    "href": "full-slide-deck.html#svyglm-example-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\n\nSummarize the data:\n\n\nanes_des_summary &lt;-\n  anes_des_der %&gt;%\n  group_by(VotedPres2024_selection) %&gt;%\n  summarize(pct_trust = survey_mean(\n    TrustGovernmentUsually,\n    na.rm = TRUE,\n    proportion = TRUE,\n    vartype = \"ci\"),\n    .groups = \"drop\"\n    ) %&gt;%\n  filter(complete.cases(.))"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example-2",
    "href": "full-slide-deck.html#svyglm-example-2",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\n\nPlot the summary of the data:"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example-3",
    "href": "full-slide-deck.html#svyglm-example-3",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\n\nVerify by fitting the model:\n\n\nlogistic_trust_vote &lt;- anes_des_der %&gt;%\n  svyglm(\n    design = .,\n    formula = TrustGovernmentUsually ~ VotedPres2024_selection,\n    family = quasibinomial\n  )"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example-4",
    "href": "full-slide-deck.html#svyglm-example-4",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\n\nVerify by fitting the model:\n\n\nlibrary(gt)\nlibrary(broom)\nlibrary(prettyunits)\n\ntidy(logistic_trust_vote) %&gt;%\n  mutate(p.value = pretty_p_value(p.value)) %&gt;%\n  gt() %&gt;%\n  fmt_number()\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Intercept)\n−1.24\n0.07\n−16.54\n&lt;0.0001\n\n\nVotedPres2024_selection2. Donald Trump\n−1.24\n0.16\n−7.65\n&lt;0.0001\n\n\nVotedPres2024_selectionOther\n−1.22\n0.75\n−1.62\n0.1050"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example-5",
    "href": "full-slide-deck.html#svyglm-example-5",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\nResult:\n\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Intercept)\n−1.24\n0.07\n−16.54\n&lt;0.0001\n\n\nVotedPres2024_selection2. Donald Trump\n−1.24\n0.16\n−7.65\n&lt;0.0001\n\n\nVotedPres2024_selectionOther\n−1.22\n0.75\n−1.62\n0.1050\n\n\n\n\n\n\n\n\nEstimated coefficients (estimate)\nEstimated standard errors of the coefficients (std.error)\np-value for each coefficient"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example-6",
    "href": "full-slide-deck.html#svyglm-example-6",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\nResult:\n\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Intercept)\n−1.24\n0.07\n−16.54\n&lt;0.0001\n\n\nVotedPres2024_selection2. Donald Trump\n−1.24\n0.16\n−7.65\n&lt;0.0001\n\n\nVotedPres2024_selectionOther\n−1.22\n0.75\n−1.62\n0.1050\n\n\n\n\n\n\n\nCompared with Harris voters, Trump voters show lower levels of trust in the government.\n\nThe coefficient of -1.24 represents the increase in the log odds of usually trusting the government."
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example-7",
    "href": "full-slide-deck.html#svyglm-example-7",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\nTo talk about odds rather than log odds, we can exponentiate the coefficients:\n\ntidy(logistic_trust_vote, exponentiate = TRUE) %&gt;%\n  select(term, estimate) %&gt;%\n  gt() %&gt;%\n  fmt_number()\n\n\n\n\n\n\n\nterm\nestimate\n\n\n\n\n(Intercept)\n0.29\n\n\nVotedPres2024_selection2. Donald Trump\n0.29\n\n\nVotedPres2024_selectionOther\n0.30"
  },
  {
    "objectID": "full-slide-deck.html#svyglm-example-8",
    "href": "full-slide-deck.html#svyglm-example-8",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "svyglm: example",
    "text": "svyglm: example\nResult:\n\n\n\n\n\n\n\n\nterm\nestimate\n\n\n\n\n(Intercept)\n0.29\n\n\nVotedPres2024_selection2. Donald Trump\n0.29\n\n\nVotedPres2024_selectionOther\n0.30\n\n\n\n\n\n\n\nThe odds that a Trump voter usually trusts the government are about 29% of the odds for a Harris voter, who serves as the reference group."
  },
  {
    "objectID": "full-slide-deck.html#interaction-effects",
    "href": "full-slide-deck.html#interaction-effects",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Interaction effects",
    "text": "Interaction effects\nNext, examine the interaction between early voting and income group in the model.\n\nSubset to 2024 voters and create an indicator for Harris voters.\n\n\nanes_des_ind &lt;- anes_des %&gt;%\n  filter(!is.na(VotedPres2024_selection)) %&gt;%\n  mutate(VoteHarris = case_when(\n    VotedPres2024_selection == \"1. Kamala Harris\" ~ 1,\n    TRUE ~ 0\n  ))"
  },
  {
    "objectID": "full-slide-deck.html#interaction-effects-1",
    "href": "full-slide-deck.html#interaction-effects-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Interaction effects",
    "text": "Interaction effects\n\nLet’s look at the main effects of income grouping and early voting behavior.\n\n\nlog_harris_main &lt;- anes_des_ind %&gt;%\n  mutate(\n    EarlyVote2024 = fct_relevel(EarlyVote2024, \"2. Have not voted\", after = 0)\n  ) %&gt;%\n  svyglm(\n    design = .,\n    formula = VoteHarris ~ EarlyVote2024 + Income7,\n    family = quasibinomial\n  )"
  },
  {
    "objectID": "full-slide-deck.html#interaction-effects-2",
    "href": "full-slide-deck.html#interaction-effects-2",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Interaction effects",
    "text": "Interaction effects\nResults:\n\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Intercept)\n−0.03\n0.17\n−0.18\n0.8576\n\n\nEarlyVote20241. Have voted\n0.12\n0.20\n0.60\n0.5508\n\n\nIncome7$20k to &lt; 40k\n−0.24\n0.22\n−1.09\n0.2764\n\n\nIncome7$40k to &lt; 60k\n−0.04\n0.22\n−0.16\n0.8720\n\n\nIncome7$60k to &lt; 80k\n−0.05\n0.20\n−0.24\n0.8104\n\n\nIncome7$80k to &lt; 100k\n0.34\n0.23\n1.49\n0.1366\n\n\nIncome7$100k to &lt; 125k\n−0.04\n0.22\n−0.20\n0.8405\n\n\nIncome7$125k or more\n0.43\n0.19\n2.26\n0.0243\n\n\n\n\n\n\n\nThis indicates that people with incomes of $125,000 or more were more likely to vote for Harris in the 2024 election compared to people with incomes of $20,000 or less (reference level).\n\nEarly voting behavior was not significant."
  },
  {
    "objectID": "full-slide-deck.html#interaction-effects-3",
    "href": "full-slide-deck.html#interaction-effects-3",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Interaction effects",
    "text": "Interaction effects\nTo find the interaction between income and early voting behavior:\n\nlog_harris_int &lt;- anes_des_ind %&gt;%\n  mutate(\n    EarlyVote2024 = fct_relevel(EarlyVote2024, \"2. Have not voted\", after = 0)\n  ) %&gt;%\n  svyglm(\n    design = .,\n    formula = VoteHarris ~ (EarlyVote2024 + Income7)^2,\n    family = quasibinomial\n  )"
  },
  {
    "objectID": "full-slide-deck.html#interaction-effects-4",
    "href": "full-slide-deck.html#interaction-effects-4",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Interaction effects",
    "text": "Interaction effects\nResults:\n\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Intercept)\n−0.05\n0.18\n−0.26\n0.7920\n\n\nEarlyVote20241. Have voted\n0.33\n0.47\n0.71\n0.4804\n\n\nIncome7$20k to &lt; 40k\n−0.19\n0.24\n−0.81\n0.4157\n\n\nIncome7$40k to &lt; 60k\n−0.05\n0.24\n−0.20\n0.8451\n\n\nIncome7$60k to &lt; 80k\n−0.07\n0.20\n−0.37\n0.7115\n\n\nIncome7$80k to &lt; 100k\n0.32\n0.24\n1.34\n0.1812\n\n\nIncome7$100k to &lt; 125k\n0.03\n0.24\n0.11\n0.9119\n\n\nIncome7$125k or more\n0.46\n0.20\n2.28\n0.0228\n\n\nEarlyVote20241. Have voted:Income7$20k to &lt; 40k\n−0.62\n0.67\n−0.92\n0.3578\n\n\nEarlyVote20241. Have voted:Income7$40k to &lt; 60k\n0.00\n0.65\n0.01\n0.9955\n\n\nEarlyVote20241. Have voted:Income7$60k to &lt; 80k\n0.37\n0.84\n0.45\n0.6547\n\n\nEarlyVote20241. Have voted:Income7$80k to &lt; 100k\n0.30\n0.84\n0.36\n0.7181\n\n\nEarlyVote20241. Have voted:Income7$100k to &lt; 125k\n−0.98\n0.65\n−1.50\n0.1334\n\n\nEarlyVote20241. Have voted:Income7$125k or more\n−0.39\n0.58\n−0.67\n0.5023"
  },
  {
    "objectID": "full-slide-deck.html#sampling-methods",
    "href": "full-slide-deck.html#sampling-methods",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Sampling methods",
    "text": "Sampling methods\nUnits can be selected in various ways such as:\n\nSimple random sampling (with or without replacement): every unit has the same chance of being selected\nSystematic sampling: sample individuals from an ordered list and sampling individuals at an interval with a random starting point\nProbability proportional to size: probability of selection is proportional to “size”"
  },
  {
    "objectID": "full-slide-deck.html#complex-designs",
    "href": "full-slide-deck.html#complex-designs",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Complex designs",
    "text": "Complex designs\nDesigns can also incorporate stratification and/or clustering:\n\nStratified sampling: divide population into mutually exclusive subgroups (strata). Randomly sample within each stratum\nClustered sampling: divide population into mutually exclusive subgroups (clusters). Randomly sample clusters and then individuals within clusters"
  },
  {
    "objectID": "full-slide-deck.html#why-design-matters",
    "href": "full-slide-deck.html#why-design-matters",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Why design matters?",
    "text": "Why design matters?\n\nThe design type impacts the variability of the estimates\nWeights impact the point estimate and the variability estimates\nSpecifying the components of the design (strata and/or clusters) and weights in R is necessary to get correct estimates"
  },
  {
    "objectID": "full-slide-deck.html#determining-the-design",
    "href": "full-slide-deck.html#determining-the-design",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Determining the design",
    "text": "Determining the design\n\n\nCheck the documentation such as methodology, design, analysis guide, or technical documentation\nDocumentation will indicate the variables needed to specify the design. Look for:\n\nweight (almost always)\nstrata and/or clusters/PSUs. Sometimes pseudo-strata and pseudo-cluster OR\nreplicate weights (this is used instead of strata/clusters for analysis)\nFinite population correction or population sizes (uncommon)\n\nDocumentation may include SAS, SUDAAN, Stata and/or R syntax\n\n\n\n\nWe will show both ANES and RECS examples when diving into code"
  },
  {
    "objectID": "full-slide-deck.html#as_survey_design-syntax",
    "href": "full-slide-deck.html#as_survey_design-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "as_survey_design(): Syntax",
    "text": "as_survey_design(): Syntax\n\nSpecifying the sampling design when you don’t have replicate weights\nas_survey_design() creates a tbl_svy object that then correctly calculates weighted estimates and SEs"
  },
  {
    "objectID": "full-slide-deck.html#syntax-for-common-designs",
    "href": "full-slide-deck.html#syntax-for-common-designs",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Syntax for common designs",
    "text": "Syntax for common designs\nLoad in the example data from {survey} package:\ndata(api, package=\"survey\")\n\nSimple Random Sample (SRS)\napisrs %&gt;% as_survey_design(fpc = fpc)\n\n\nStratified SRS\napistrat %&gt;% as_survey_design(strata = stype, weights = pw)\n\n\nOne-stage cluster sample with a FPC variable\napiclus1 %&gt;% as_survey_design(ids = dnum, weights = pw, fpc = fpc)\n\n\nTwo-stage cluster sample, weights computed from population size\napiclus2 %&gt;% as_survey_design(ids = c(dnum, snum), fpc = c(fpc1, fpc2))\n\n\nStratified, cluster design\napistrat %&gt;% as_survey_design(ids = dnum, strata = stype, weights =pw, nest = TRUE)\n\n\n\nExamples from srvyr help documentation"
  },
  {
    "objectID": "full-slide-deck.html#example-anes-2024",
    "href": "full-slide-deck.html#example-anes-2024",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: ANES 2024",
    "text": "Example: ANES 2024\n\nUser Guide and Codebook1 : Section “Data Analysis, Weights, and Variance Estimation” includes information on weights and strata/cluster variables\n\n\nThe list below indicates which weight variable to use for different types of analyses with the full release data. In general, if any post-election data are used for an estimate (alone or in combination with pre-election data), a post-election weight variable should be used, while analyses using solely pre-election data should use a pre-election weight.\n\nhttps://electionstudies.org/data-center/20204time-series-study/"
  },
  {
    "objectID": "full-slide-deck.html#example-anes-2024-1",
    "href": "full-slide-deck.html#example-anes-2024-1",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: ANES 2024",
    "text": "Example: ANES 2024\n\n\n\n\n\n\n\n\nWeight\nUse for analysis from the…\nvariance PSU\nvariance stratum\n\n\n\n\nV240101a\nPre-election fresh in-person sample alone\nV240101c\nV240101d\n\n\nV240101b\nPost-election fresh in-person sample alone\nV240101c\nV240101d\n\n\nV240102a\nPre-election fresh web sample alone\nV240102c\nV240102d\n\n\nV240102b\nPost-election fresh web sample alone\nV240102c\nV240102d\n\n\nV240103a\nPre-election fresh samples (fresh in-person + fresh web)\nV240103c\nV240103d\n\n\n...\n...\n...\n...\n\n\nV240108a\nPre-election full sample (fresh in-person + fresh web + panel)\nV240108c\nV240108d\n\n\nV240108b\nPost-election full sample (fresh in-person + fresh web + panel)\nV240108c\nV240108d"
  },
  {
    "objectID": "full-slide-deck.html#example-anes-2024-2",
    "href": "full-slide-deck.html#example-anes-2024-2",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: ANES 2024",
    "text": "Example: ANES 2024\n\n\n\n\n\n\n\n\nWeight\nUse for analysis from the…\nvariance PSU\nvariance stratum\n\n\n\n\nV240101a\nPre-election fresh in-person sample alone\nV240101c\nV240101d\n\n\nV240101b\nPost-election fresh in-person sample alone\nV240101c\nV240101d\n\n\nV240102a\nPre-election fresh web sample alone\nV240102c\nV240102d\n\n\nV240102b\nPost-election fresh web sample alone\nV240102c\nV240102d\n\n\nV240103a\nPre-election fresh samples (fresh in-person + fresh web)\nV240103c\nV240103d\n\n\n...\n...\n...\n...\n\n\nV240108a\nPre-election full sample (fresh in-person + fresh web + panel)\nV240108c\nV240108d\n\n\nV240108b\nPost-election full sample (fresh in-person + fresh web + panel)\nV240108c\nV240108d\n\n\n\n\n\n\n\n\nPost-election, full sample: Weight = V240108b\nUse V240108c for variance PSU and V240108d for variance stratum"
  },
  {
    "objectID": "full-slide-deck.html#example-anes-2024-syntax",
    "href": "full-slide-deck.html#example-anes-2024-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: ANES 2024 Syntax",
    "text": "Example: ANES 2024 Syntax\n\nTarget population: 232,449,541\nIsabella has a blog post on calculating the population for ANES 2024 data: https://rworks.netlify.app/posts/anes2024/"
  },
  {
    "objectID": "full-slide-deck.html#example-anes-2024-design",
    "href": "full-slide-deck.html#example-anes-2024-design",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: ANES 2024 Design",
    "text": "Example: ANES 2024 Design\n\n\nStratified 1 - level Cluster Sampling design (with replacement)\nWith (1934) clusters.\nCalled via srvyr\nProbabilities:\n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n4.099e-06 1.734e-05 3.359e-05 4.545e-05 5.939e-05 4.075e-04 \nStratum Sizes: \n            1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22\nobs        22 16 30 34 30 28 27 30 28 32 31 22 25 34 18 24 36 31 38 28 43 45\ndesign.PSU  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2\nactual.PSU  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2  2\n           23 24 25 26 27 28 29 30 31 32  33 34 35 36 37 38 39 40 41 42 43\nobs        49 22 40 38 47 32  8  6 12 19 306 12 13 12 10 10 11 11 13 12 13\ndesign.PSU  2  2  2  2  2  2  2  2  2  2 306 12 13 12 10 10 11 11 13 12 13\nactual.PSU  2  2  2  2  2  2  2  2  2  2 306 12 13 12 10 10 11 11 13 12 13\n           44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65\nobs        11 12 12 13 13  9 41 38 38 37 41 39 36 43 37 32 36 38 40 37 36 39\ndesign.PSU 11 12 12 13 13  9 41 38 38 37 41 39 36 43 37 32 36 38 40 37 36 39\nactual.PSU 11 12 12 13 13  9 41 38 38 37 41 39 36 43 37 32 36 38 40 37 36 39\n           66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87\nobs        41 44 42 43 42 44 44 41 44 41 42 41 42 40 39 38 51 31 45 40 47 59\ndesign.PSU 41 44 42 43 42 44 44 41 44 41 42 41 42 40 39 38  3  2  2  2  2  2\nactual.PSU 41 44 42 43 42 44 44 41 44 41 42 41 42 40 39 38  3  2  2  2  2  2\n           88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106\nobs        52 53 41 49 35 58 46 57 42 41 44 53  56  37  58  39  48  50  52\ndesign.PSU  2  2  2  2  2  2  2  2  2  2  2  2   2   2   2   2   2   2   2\nactual.PSU  2  2  2  2  2  2  2  2  2  2  2  2   2   2   2   2   2   2   2\n           107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122\nobs         57  51  33  55  44  43  36  32  28  23  31  36  34  37  29  44\ndesign.PSU   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2\nactual.PSU   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2   2\n           123 124 125 126 127 128 129 130 131\nobs         31  36  27  26  32  35  32  29  25\ndesign.PSU   2   2   2   2   2   2   2   2   2\nactual.PSU   2   2   2   2   2   2   2   2   2\nData variables:\n [1] \"CaseID\"                  \"InterviewMode_Pre\"      \n [3] \"InterviewMode_Post\"      \"Weight\"                 \n [5] \"Stratum\"                 \"VarUnit\"                \n [7] \"CampaignInterest\"        \"VotedPres2020\"          \n [9] \"VotedPres2020_selection\" \"PartyID\"                \n[11] \"TrustGovernment\"         \"TrustPeople\"            \n[13] \"Age\"                     \"Education\"              \n[15] \"RaceEth\"                 \"Sex\"                    \n[17] \"Income\"                  \"EarlyVote2024\"          \n[19] \"VotedPres2024\"           \"VotedPres2024_selection\"\n[21] \"AgeGroup\"                \"EducationGroup\"         \n[23] \"Income7\"                 \"V240001\"                \n[25] \"V240002a\"                \"V240002b\"               \n[27] \"V240108b\"                \"V240108d\"               \n[29] \"V240108c\"                \"V241005\"                \n[31] \"V241103\"                 \"V241104\"                \n[33] \"V241038\"                 \"V241221\"                \n[35] \"V241222\"                 \"V241223\"                \n[37] \"V241227x\"                \"V241229\"                \n[39] \"V241234\"                 \"V241458x\"               \n[41] \"V241463\"                 \"V241499\"                \n[43] \"V241501x\"                \"V241550\"                \n[45] \"V241566x\"                \"V242065\"                \n[47] \"V241035\"                 \"V241037\"                \n[49] \"V242051\"                 \"V242095x\"               \n[51] \"V242066\"                 \"V241039\"                \n[53] \"V242067\"                 \"V242096x\""
  },
  {
    "objectID": "full-slide-deck.html#national-health-and-nutrition-examination-survey-nhanes",
    "href": "full-slide-deck.html#national-health-and-nutrition-examination-survey-nhanes",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "National Health and Nutrition Examination Survey (NHANES)",
    "text": "National Health and Nutrition Examination Survey (NHANES)\n\nAnalysis weight: WTINT2YR\nVariance Stratum: SDMVSTRA\nVariance Primary Sampling Unit: VPSU\nLarge population\n\n\nFill in the blankSolution\n\n\nnhanes_des &lt;- nhanes %&gt;%\n   as_survey_design(\n      weights = ___________,\n      ids = ___________, \n      strata = ___________, \n      fpc = ___________, \n   )\n\n\nnhanes_des &lt;- nhanes %&gt;%\n   as_survey_design(\n      weights = WTINT2YR,\n      ids = VPSU,\n      strata = SDMVSTRA,\n      fpc = NULL\n   )"
  },
  {
    "objectID": "full-slide-deck.html#replicate-weights-overview",
    "href": "full-slide-deck.html#replicate-weights-overview",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Replicate weights overview",
    "text": "Replicate weights overview\n\nReplicate weights are a method to estimate variability that does not rely on stratum and clusters (can assist with disclosure)\nCommon replicate weight methods\n\nBalanced repeated replication (BRR)\nFay’s BRR\nJackknife\nBootstrap"
  },
  {
    "objectID": "full-slide-deck.html#as_survey_rep-syntax",
    "href": "full-slide-deck.html#as_survey_rep-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "as_survey_rep(): Syntax",
    "text": "as_survey_rep(): Syntax\nas_survey_rep() creates a tbl_svy object that then correctly calculates weighted estimates and SEs"
  },
  {
    "objectID": "full-slide-deck.html#syntax-for-common-replicate-methods",
    "href": "full-slide-deck.html#syntax-for-common-replicate-methods",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Syntax for common replicate methods",
    "text": "Syntax for common replicate methods\n\nNote: this uses fake data and can’t be run, just syntax examples"
  },
  {
    "objectID": "full-slide-deck.html#example-recs-2020",
    "href": "full-slide-deck.html#example-recs-2020",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: RECS 2020",
    "text": "Example: RECS 2020\n\nUsing the microdata file to compute estimates and relative standard errors1\n\n\nThe following instructions are examples for calculating any RECS estimate using the final weights (NWEIGHT) and the associated RSE using the replicate weights (NWEIGHT1 – NWEIGHT60).\n\n\nIncludes R syntax for {survey} package which gets us what we need for {srvyr}\n\nhttps://www.eia.gov/consumption/residential/data/2020/pdf/microdata-guide.pdf"
  },
  {
    "objectID": "full-slide-deck.html#example-recs-2020-syntax",
    "href": "full-slide-deck.html#example-recs-2020-syntax",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: RECS 2020 Syntax",
    "text": "Example: RECS 2020 Syntax"
  },
  {
    "objectID": "full-slide-deck.html#example-recs-2020-output",
    "href": "full-slide-deck.html#example-recs-2020-output",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Example: RECS 2020 Output",
    "text": "Example: RECS 2020 Output\n\n\nCall: Called via srvyr\nUnstratified cluster jacknife (JK1) with 60 replicates and MSE variances.\nSampling variables:\n  - repweights: `NWEIGHT1 + NWEIGHT2 + NWEIGHT3 + NWEIGHT4 + NWEIGHT5 +\n    NWEIGHT6 + NWEIGHT7 + NWEIGHT8 + NWEIGHT9 + NWEIGHT10 + NWEIGHT11 +\n    NWEIGHT12 + NWEIGHT13 + NWEIGHT14 + NWEIGHT15 + NWEIGHT16 + NWEIGHT17 +\n    NWEIGHT18 + NWEIGHT19 + NWEIGHT20 + NWEIGHT21 + NWEIGHT22 + NWEIGHT23 +\n    NWEIGHT24 + NWEIGHT25 + NWEIGHT26 + NWEIGHT27 + NWEIGHT28 + NWEIGHT29 +\n    NWEIGHT30 + NWEIGHT31 + NWEIGHT32 + NWEIGHT33 + NWEIGHT34 + NWEIGHT35 +\n    NWEIGHT36 + NWEIGHT37 + NWEIGHT38 + NWEIGHT39 + NWEIGHT40 + NWEIGHT41 +\n    NWEIGHT42 + NWEIGHT43 + NWEIGHT44 + NWEIGHT45 + NWEIGHT46 + NWEIGHT47 +\n    NWEIGHT48 + NWEIGHT49 + NWEIGHT50 + NWEIGHT51 + NWEIGHT52 + NWEIGHT53 +\n    NWEIGHT54 + NWEIGHT55 + NWEIGHT56 + NWEIGHT57 + NWEIGHT58 + NWEIGHT59 +\n    NWEIGHT60` \n  - weights: NWEIGHT \nData variables: \n  - DOEID (dbl), ClimateRegion_BA (fct), Urbanicity (fct), Region (fct),\n    REGIONC (chr), Division (fct), STATE_FIPS (chr), state_postal (fct),\n    state_name (fct), HDD65 (dbl), CDD65 (dbl), HDD30YR (dbl), CDD30YR\n    (dbl), HousingUnitType (fct), YearMade (ord), TOTSQFT_EN (dbl), TOTHSQFT\n    (dbl), TOTCSQFT (dbl), SpaceHeatingUsed (lgl), ACUsed (lgl),\n    HeatingBehavior (fct), WinterTempDay (dbl), WinterTempAway (dbl),\n    WinterTempNight (dbl), ACBehavior (fct), SummerTempDay (dbl),\n    SummerTempAway (dbl), SummerTempNight (dbl), NWEIGHT (dbl), NWEIGHT1\n    (dbl), NWEIGHT2 (dbl), NWEIGHT3 (dbl), NWEIGHT4 (dbl), NWEIGHT5 (dbl),\n    NWEIGHT6 (dbl), NWEIGHT7 (dbl), NWEIGHT8 (dbl), NWEIGHT9 (dbl),\n    NWEIGHT10 (dbl), NWEIGHT11 (dbl), NWEIGHT12 (dbl), NWEIGHT13 (dbl),\n    NWEIGHT14 (dbl), NWEIGHT15 (dbl), NWEIGHT16 (dbl), NWEIGHT17 (dbl),\n    NWEIGHT18 (dbl), NWEIGHT19 (dbl), NWEIGHT20 (dbl), NWEIGHT21 (dbl),\n    NWEIGHT22 (dbl), NWEIGHT23 (dbl), NWEIGHT24 (dbl), NWEIGHT25 (dbl),\n    NWEIGHT26 (dbl), NWEIGHT27 (dbl), NWEIGHT28 (dbl), NWEIGHT29 (dbl),\n    NWEIGHT30 (dbl), NWEIGHT31 (dbl), NWEIGHT32 (dbl), NWEIGHT33 (dbl),\n    NWEIGHT34 (dbl), NWEIGHT35 (dbl), NWEIGHT36 (dbl), NWEIGHT37 (dbl),\n    NWEIGHT38 (dbl), NWEIGHT39 (dbl), NWEIGHT40 (dbl), NWEIGHT41 (dbl),\n    NWEIGHT42 (dbl), NWEIGHT43 (dbl), NWEIGHT44 (dbl), NWEIGHT45 (dbl),\n    NWEIGHT46 (dbl), NWEIGHT47 (dbl), NWEIGHT48 (dbl), NWEIGHT49 (dbl),\n    NWEIGHT50 (dbl), NWEIGHT51 (dbl), NWEIGHT52 (dbl), NWEIGHT53 (dbl),\n    NWEIGHT54 (dbl), NWEIGHT55 (dbl), NWEIGHT56 (dbl), NWEIGHT57 (dbl),\n    NWEIGHT58 (dbl), NWEIGHT59 (dbl), NWEIGHT60 (dbl), BTUEL (dbl), DOLLAREL\n    (dbl), BTUNG (dbl), DOLLARNG (dbl), BTULP (dbl), DOLLARLP (dbl), BTUFO\n    (dbl), DOLLARFO (dbl), BTUWOOD (dbl), TOTALBTU (dbl), TOTALDOL (dbl)\nVariables: \n  [1] \"DOEID\"            \"ClimateRegion_BA\" \"Urbanicity\"      \n  [4] \"Region\"           \"REGIONC\"          \"Division\"        \n  [7] \"STATE_FIPS\"       \"state_postal\"     \"state_name\"      \n [10] \"HDD65\"            \"CDD65\"            \"HDD30YR\"         \n [13] \"CDD30YR\"          \"HousingUnitType\"  \"YearMade\"        \n [16] \"TOTSQFT_EN\"       \"TOTHSQFT\"         \"TOTCSQFT\"        \n [19] \"SpaceHeatingUsed\" \"ACUsed\"           \"HeatingBehavior\" \n [22] \"WinterTempDay\"    \"WinterTempAway\"   \"WinterTempNight\" \n [25] \"ACBehavior\"       \"SummerTempDay\"    \"SummerTempAway\"  \n [28] \"SummerTempNight\"  \"NWEIGHT\"          \"NWEIGHT1\"        \n [31] \"NWEIGHT2\"         \"NWEIGHT3\"         \"NWEIGHT4\"        \n [34] \"NWEIGHT5\"         \"NWEIGHT6\"         \"NWEIGHT7\"        \n [37] \"NWEIGHT8\"         \"NWEIGHT9\"         \"NWEIGHT10\"       \n [40] \"NWEIGHT11\"        \"NWEIGHT12\"        \"NWEIGHT13\"       \n [43] \"NWEIGHT14\"        \"NWEIGHT15\"        \"NWEIGHT16\"       \n [46] \"NWEIGHT17\"        \"NWEIGHT18\"        \"NWEIGHT19\"       \n [49] \"NWEIGHT20\"        \"NWEIGHT21\"        \"NWEIGHT22\"       \n [52] \"NWEIGHT23\"        \"NWEIGHT24\"        \"NWEIGHT25\"       \n [55] \"NWEIGHT26\"        \"NWEIGHT27\"        \"NWEIGHT28\"       \n [58] \"NWEIGHT29\"        \"NWEIGHT30\"        \"NWEIGHT31\"       \n [61] \"NWEIGHT32\"        \"NWEIGHT33\"        \"NWEIGHT34\"       \n [64] \"NWEIGHT35\"        \"NWEIGHT36\"        \"NWEIGHT37\"       \n [67] \"NWEIGHT38\"        \"NWEIGHT39\"        \"NWEIGHT40\"       \n [70] \"NWEIGHT41\"        \"NWEIGHT42\"        \"NWEIGHT43\"       \n [73] \"NWEIGHT44\"        \"NWEIGHT45\"        \"NWEIGHT46\"       \n [76] \"NWEIGHT47\"        \"NWEIGHT48\"        \"NWEIGHT49\"       \n [79] \"NWEIGHT50\"        \"NWEIGHT51\"        \"NWEIGHT52\"       \n [82] \"NWEIGHT53\"        \"NWEIGHT54\"        \"NWEIGHT55\"       \n [85] \"NWEIGHT56\"        \"NWEIGHT57\"        \"NWEIGHT58\"       \n [88] \"NWEIGHT59\"        \"NWEIGHT60\"        \"BTUEL\"           \n [91] \"DOLLAREL\"         \"BTUNG\"            \"DOLLARNG\"        \n [94] \"BTULP\"            \"DOLLARLP\"         \"BTUFO\"           \n [97] \"DOLLARFO\"         \"BTUWOOD\"          \"TOTALBTU\"        \n[100] \"TOTALDOL\""
  },
  {
    "objectID": "full-slide-deck.html#american-community-survey-acs",
    "href": "full-slide-deck.html#american-community-survey-acs",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "American Community Survey (ACS)",
    "text": "American Community Survey (ACS)\n\nAnalysis weight: PWGTP\nreplicate weights: PWGTP1-PWGTP180\njackknife with scale adjustment of 4/80\n\n\nFill in the blankSolution\n\n\nacs_des &lt;- acs_pums %&gt;%\n   as_survey_rep(\n      weights = ___________,\n      repweights = ___________,\n      type = ___________,\n      scale = _________ \n   )\n\n\nacs_des &lt;- acs_pums %&gt;%\n   as_survey_rep(\n      weights = PWGTP,\n      repweights = num_range(\"PWGTP\", 1:80),\n      type = \"JK1\",\n      scale = 4/80\n   )"
  },
  {
    "objectID": "full-slide-deck.html#tips-for-correctly-specifying",
    "href": "full-slide-deck.html#tips-for-correctly-specifying",
    "title": "Categorical Survey of Complex Survey Data in R",
    "section": "Tips for correctly specifying",
    "text": "Tips for correctly specifying\n\n\nFor public use datasets: Documentation, Documentation, Documentation\n\nRead through user guides\nSearch for keywords (e.g., “weight”, “strata”) in the user guides\nGoogle\nReach out to the study contact with questions\n\nFor data you create: Please provide good documentation!"
  }
]